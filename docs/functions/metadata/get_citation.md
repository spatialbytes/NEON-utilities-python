# Generate Citations

The `get_citation` function retrieves proper citation information for NEON data products in BibTeX format. This function is essential for appropriately citing NEON data in scientific publications.

## Function Signature

```python
def get_citation(dpid, release):
```

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `dpid` | str | The data product ID of the data to be cited, e.g., "DP1.10003.001" |
| `release` | str | The data release to be cited, e.g., "RELEASE-2023" or "PROVISIONAL" |

## Returns

A string containing the citation in BibTeX format.

## Description

The `get_citation` function uses the DOI Foundation API to retrieve BibTeX-formatted citations for released NEON data, or generates a citation from a template for provisional data. Proper citation of data is critical for scientific reproducibility and giving credit to the data collectors and providers.

For released data, the function retrieves the Digital Object Identifier (DOI) from the NEON API and then queries the DOI Foundation API to get a properly formatted BibTeX citation.

For provisional data, the function constructs a citation from a template since provisional data does not have a DOI. This template includes the current year, the product name, and other required citation elements.

## Examples

### Basic Usage

```python
from neonutilities import get_citation

# Get citation for breeding landbird point counts, RELEASE-2023
citation = get_citation(dpid="DP1.10003.001", release="RELEASE-2023")
print(citation)
```

Output:
```bibtex
@misc{https://doi.org/10.48443/abcd.123,
  doi = {10.48443/abcd.123},
  url = {https://data.neonscience.org/api/v0/data/DP1.10003.001},
  author = {{National Ecological Observatory Network (NEON)}},
  language = {en},
  title = {Breeding landbird point counts (DP1.10003.001)},
  publisher = {National Ecological Observatory Network (NEON)},
  year = {2023}
}
```

### Citation for Provisional Data

```python
from neonutilities import get_citation

# Get citation for provisional data
citation = get_citation(dpid="DP1.10003.001", release="PROVISIONAL")
print(citation)
```

Output:
```bibtex
@misc{DP1.10003.001/provisional,
  doi = {},
  url = {https://data.neonscience.org/data-products/DP1.10003.001},
  author = {{National Ecological Observatory Network (NEON)}},
  language = {en},
  title = {Breeding landbird point counts (DP1.10003.001)},
  publisher = {National Ecological Observatory Network (NEON)},
  year = {2025}
}
```

### Save Citations to Files

```python
from neonutilities import get_citation

# Get citations for both released and provisional data
released_citation = get_citation(dpid="DP1.10003.001", release="RELEASE-2023")
provisional_citation = get_citation(dpid="DP1.10003.001", release="PROVISIONAL")

# Save to files
with open("citation_released.bib", "w") as f:
    f.write(released_citation)

with open("citation_provisional.bib", "w") as f:
    f.write(provisional_citation)

print("Citations saved to files")
```

### Including Citations in Publications

For LaTeX documents:

```latex
% In your document preamble
\bibliographystyle{plain}

% In the document body, cite the data
The bird survey data used in this study was collected by the National Ecological
Observatory Network \cite{neondatacitation}.

% In your bibliography file
@misc{neondatacitation,
  doi = {10.48443/abcd.123},
  url = {https://data.neonscience.org/api/v0/data/DP1.10003.001},
  author = {{National Ecological Observatory Network (NEON)}},
  language = {en},
  title = {Breeding landbird point counts (DP1.10003.001)},
  publisher = {National Ecological Observatory Network (NEON)},
  year = {2023}
}
```

## Handling Error Conditions

The function handles various error conditions:

```python
from neonutilities import get_citation

try:
    # Get citation for a non-existent release
    citation = get_citation(dpid="DP1.10003.001", release="RELEASE-1999")
except Exception as e:
    print(f"Error: {e}")
```

Output:
```
Error: There are no data with dpid=DP1.10003.001 and release=RELEASE-1999
```

## Notes

### Importance of Citing Data

Proper citation of data is a scientific best practice that:
- Gives credit to the data providers
- Ensures research reproducibility
- Helps track data usage and impact
- Fulfills funding requirements

### Citation Structure

The BibTeX citations generated by this function include:
- DOI (for released data)
- URL
- Author (National Ecological Observatory Network)
- Title (product name and ID)
- Publisher
- Year of release

### Inclusion in Downloaded Data

When you use [`zips_by_product()`](../tabular/zips_by_product.md), [`load_by_product()`](../tabular/load_by_product.md), [`by_file_aop()`](../aop/by_file_aop.md), or [`by_tile_aop()`](../aop/by_tile_aop.md), citation files are automatically included in the downloaded data.

## Related Functions

- [`zips_by_product()`](../tabular/zips_by_product.md): Download data packages
- [`get_issue_log()`](get_issue_log.md): Get the issue log for a data product
